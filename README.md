# CAMP_IOTProject

# :ferris_wheel:최종 프로젝트 대비 스테이션 제작:ferris_wheel:
---------------------
## Contents
### [Phase 01] 전체적인 구조
: '최종 프로젝트'에 대한 간략한 설명
### [Phase 02] 스테이션에 대해
: '스테이션'에 대해
### [Phase 03] 구현하기
: '스테이션'을 어떻게 구현할 것인가

------------------------
## [Phase 01] 전체적인 구조

### '최종 프로젝트' 주제 선정 이유와 해결방안
- 주제: 차도없이 조성되는 요즘의 아파트 & 택배종사자와의 마찰
- 해결방안: ‘아파트 갑질’은 모두가 한번씩 들어본 적이 있을 것이다. 요즘, 아파트는 지상의 차도를 없애며 공원으로 조성하고 있으며, 낮은 차고를 가진 차량만이 지하를 이용할 수 있도록 하고 있다.
이는 배달 업종 종사자들과의 마찰을 만들어냈고, 이를 대신하는 로봇을 통해 문제를 해결하고자 한다.

### 택배 현황과 문제점
- 현황: 1인당 택배 이용건수 : 연간 70회
- 택배의 문제점: 날이 갈수록 택배의 이용량은 연간 10%씩 증가하고 있다. 반면 택배환경은 여전히 답보상태이다. 실제로 배송을 할때, 건물 내에서 대기시간이 상당하다고 한다.
- 추가 정보1: 전국 총 주택 가운데 아파트의 비율은 62%
- 추가 정보2: 아파트 한 동 당 하루 평균 택배의 양: 8~18개

### 택배배송 시스템 & 대표사례
- 유통업계에 라스트마일 배송의 중요성이 확대되는 가운데 배송 기술 역시 혁신을 거듭나고 있다. 전체 운송에서 라스트마일 배송이 차지하는 비중은 절반 이상이며, 인력 부족 심화 속 유통업체들은 비용절감과 수익 증대를 위해 첨단기술을 기반으로 하는 배송 시스템을 구축하는 중이다. 그 중에서도 엘리베이터를 통해 층간이동을 하며 배송을 하는 국내기업에는 “WATT”가 있다.
 이미 시중에서 사용가능한 로봇을 제작하는 “WATT”의 ‘제임스’는 층간을 이동하며 서비스를 제공한다. 사진 속의 로봇이 “WATT”의 ‘제임스’이고, 직접 엘리베이터를 통해 택배를 배송할 수 있다.

### 서비스 구상을 위해 필요한 4가지 단계
in STATION : 같은 동/층에 따라 택배를 분류하고 보관합니다
- 1단계 - 택배를 인식하고 분류하는 단계
- 2단계 - 제품을 보관하는 단계 (스테이션)
in ROBOT : 보관된 택배를 들고 주행 및 배송합니다
- 3단계 - 택배를 집어서 로봇내부 <-> 로봇외부로 옮기는 단계
- 4단계 - 로봇이 택배를 들고 원하는 장소로 가는 주행 단계
------------------------
## [Phase 02] 스테이션에 대해

### STATION 내부
[스테이션의 입구] -> [레일] -> [관람차식 택배보관소]
(1) 송장을 인식하는 스테이션의 입구: 입구로 들어오는 택배 인식합니다.
(2) 레일 : 통과한 택배는 레일을 타고, 바로 '관람차식 택배보관소'로 이동합니다.
(3) 관람차식 택배보관소 : 각도조절 알고리즘을 통해 구동되는 보관소에 저장됩니다.

### 하드웨어 제작
- 구조: 하드웨어 제작 시, 관람차의 구조를 응용하였습니다.
- 활용방식과 단계
(1) 레일을 타고 택배가 옵니다
(2) 레일의 높이에 맞게 바구니가 위치합니다
(3) 택배가 바구니에 담기고난뒤에 다른 주소의 택배가 온다면, 새 바구니가 다시 레일의 끝에 위치합니다
(4) 같은 주소의 택배가 온다면, 그 주소의 택배가 담긴 바구니가 다시 회전하여 돌아옵니다. (이것은 최대 3개까지 적재합니다) (자세한 알고리즘은 아래를 참고하세요)
![Screenshot from 2023-09-12 10-29-58](https://github.com/addinedu-amr-3rd/IoT-repo-4/assets/140477578/1a1ebfd4-964e-49a3-b3d7-36ef6c973e98)

------------------------
## [Phase 03] 구현하기 WITH ARDUINO

### 사용한 기술 및 부품
- 아두이노, LCD, 스위치, LED, 초음파 센서, C++, 엔코더 모터, 3D PRINT, 리눅스
- (엔코더 모터) 관람차식 택배보관소는 회전하며 바구니의 위치를 제어합니다.이때, 각도를 이용하기 위해 엔코더 모터를 사용합니다.
- (초음파 센서) 초음파센서를 이용하여 바구니가 레일과 가까워지는 거리를 계산하여 바구니의 위치를 파악합니다.
- (LCD) 실제 레일과 주행로봇을 구현하지 않았기에, ‘레일을 통해 들어오는 택배’ 와 ‘택배를 가져가는 로봇’를 시각적으로 표현하기 위해 사용하였습니다.
- (스위치) 택배가 들어오는 신호를 스위치를  이용하여 대신하였습니다.

### IoT 프로젝트 순서도
![IoT프로젝트_순서도](https://github.com/addinedu-amr-3rd/IoT-repo-3/assets/140477578/ee574fb6-c701-4470-9fa9-95d0fc439891)

### CODE 
(일부 코드 발췌)
```
   if (label1 != 0 && label2 != 0 && label3 != 0 && label4 != 0 && label5 != 0 && label7 != 0)
    {
      if (digitalRead(button6) == HIGH)
      {
        if (toggle6 == 0)
        {
          toggle6 = 1;
        }
      }
      else
      {
        if (toggle6 == 1)
        {
          angleToggle = 2;
          Serial.println("S T O P !");
        }
      }
    }
    else
    {
      if (digitalRead(button6) == HIGH)
      {
        if (toggle6 == 0)
        {
          toggle6 = 1;
        }
      }
      else
      {
        if (toggle6 == 1)
        {
          if(label6 == 0)
          {
            if(box1 == 0)
            {
              label6 = 1;
              box1 += 1;
              target(angle1);
            }
            else if(box2 == 0)
            {
              label6 = 2;
              box2 += 1;
              target(angle2);
            }
            else if(box3 == 0)
            {
              label6 = 3;
              box3 += 1;
              target(angle3);
            }
            else if(box4 == 0)
            {
              label6 = 4;
              box4 += 1;
              target(angle4);
            }
            else if(box5 == 0)
            {
              label6 = 5;
              box5 += 1;
              target(angle5);
            }
            else if(box6 == 0)
            {
              label6 = 6;
              box6 += 1;
              target(angle6);
            }
            toggle6 = 0;
          }
          else
          {
            if(label6 == 1)
            {
              box1 += 1;
              target(angle1);
            }
            else if(label6 == 2)
            {
              box2 += 1;
              target(angle2);
            }
            else if(label6 == 3)
            {
              box3 += 1;
              target(angle3);
            }
            else if(label6 == 4)
            {
              box4 += 1;
              target(angle4);
            }
            else if(label6 == 5)
            {
              box5 += 1;
              target(angle5);
            }
            else if(label6 == 6)
            {
              box6 += 1;
              target(angle6);
            }
            toggle6 = 0;
          }
        }
      }
    }
```
-----------------------
### 시연영상
https://www.canva.com/design/DAFs6_3nnTs/8Aq7FAV99qUw5Iok3JxsGw/view?utm_content=DA[…]mpaign=designshare&utm_medium=link&utm_source=publishsharelink
(마지막장에 포함되어 있습니다.)
